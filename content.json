{"meta":{"title":"Jonn","subtitle":"代码搬运工","description":"Rigging | MEL | Python | MayaAPI | MayaPythonAPI |PyQt | C++ ...","author":"Jonn","url":"https://blog.cgdreamwork.com","root":"/"},"pages":[{"title":"关于","date":"2025-12-04T08:29:04.880Z","updated":"2025-12-04T08:29:04.880Z","comments":true,"path":"about/index.html","permalink":"https://blog.cgdreamwork.com/about/index.html","excerpt":"","text":"关于我爱生活，爱编程，Github 死忠（欢迎 Follow 和 Star）喜欢简洁的代码，扁平的设计，酷炫的动画… XD不喜欢篮球、羽毛球、跑步、健身等运动（有想法可以约喔 (╭￣3￣)╭）… 关于文章平时开发过程中的一些感悟和想法，皆为拙见如果有任何意见或建议可以评论或 发邮件 给我 联系方式 EMail： ** &#106;&#111;&#110;&#x6e;&#116;&#x64;&#64;&#103;&#109;&#97;&#105;&#108;&#x2e;&#x63;&#x6f;&#109; ** QQ： ** 948288788 **"},{"title":"分类","date":"2015-09-16T15:23:03.000Z","updated":"2025-12-04T08:29:04.880Z","comments":false,"path":"categories/index.html","permalink":"https://blog.cgdreamwork.com/categories/index.html","excerpt":"","text":""},{"title":"标签","date":"2015-09-16T15:24:37.000Z","updated":"2025-12-04T08:29:04.880Z","comments":false,"path":"tags/index.html","permalink":"https://blog.cgdreamwork.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"maya2022 py2 build numpy","slug":"maya-build-numpy","date":"2023-03-30T22:19:08.000Z","updated":"2025-12-04T08:29:04.879Z","comments":true,"path":"post/fb874109.html","link":"","permalink":"https://blog.cgdreamwork.com/post/fb874109.html","excerpt":"","text":"参考 https://medium.com/@1null4null/cython-maya2018-2019-python2-7-17-921c548337b9 https://vaishakp.com/2018/11/21/cython-in-maya-2018-windows/ https://gist.github.com/nrtkbb/5b65d2f5ed42bd9947b5 下载cython源码解压:https://codeload.github.com/cython/cython/zip/refs/heads/master 1234567891011121314151617181920212223242526用mayapy编译会提示找不到python.h# 增加代码extra_include_dirs = []if &#x27;EXTRA_INCLUDE_DIRS&#x27; in os.environ: extra_include_dirs = os.environ[&#x27;EXTRA_INCLUDE_DIRS&#x27;].split(&#x27;;&#x27;) print(&quot;EXTRA_INCLUDE_DIRS: &quot;, extra_include_dirs)extra_libraries = []if &#x27;EXTRA_LIBRARIES&#x27; in os.environ: extra_libraries = os.environ[&#x27;EXTRA_LIBRARIES&#x27;].split(&#x27;;&#x27;) print(&quot;EXTRA_LIBRARIES: &quot;, extra_libraries)# 修改extensions.append(Extension( module, sources=[pyx_source_file], define_macros=defines if &#x27;.refnanny&#x27; not in module else [], depends=dep_files , library_dirs=extra_libraries, # 增加 include_dirs=extra_include_dirs, # 增加 )) 1234set VS90COMNTOOLS=%VS140COMNTOOLS%set EXTRA_INCLUDE_DIRS=C:/Program Files/Autodesk/Maya2022/include/Python27/Pythonset EXTRA_LIBRARIES=C:/Program Files/Autodesk/Maya2022/lib&quot;C:\\Program Files\\Autodesk\\Maya2022\\bin\\mayapy2.exe&quot; setup.py build_ext --inplace 测试按照这里建立文件夹测试https://gist.github.com/nrtkbb/5b65d2f5ed42bd9947b5 setup.py123456789101112131415161718192021222324from distutils.core import setupfrom distutils.extension import Extensionfrom Cython.Distutils import build_extimport osextra_include_dirs = []if &#x27;EXTRA_INCLUDE_DIRS&#x27; in os.environ: extra_include_dirs = os.environ[&#x27;EXTRA_INCLUDE_DIRS&#x27;].split(&#x27;;&#x27;) print(&quot;EXTRA_INCLUDE_DIRS: &quot;, extra_include_dirs)extra_libraries = []if &#x27;EXTRA_LIBRARIES&#x27; in os.environ: extra_libraries = os.environ[&#x27;EXTRA_LIBRARIES&#x27;].split(&#x27;;&#x27;) print(&quot;EXTRA_LIBRARIES: &quot;, extra_libraries)setup( cmdclass = &#123;&#x27;build_ext&#x27;: build_ext&#125;, ext_modules = [Extension(&quot;helloworld&quot;, [&quot;helloworld.pyx&quot;], library_dirs=extra_libraries, include_dirs=extra_include_dirs, )]) helloworld.pyx1234567&quot;&quot;&quot;This is cython file.Compiled from setup.py and python ( same version to mayapy )&quot;&quot;&quot;def hello(): print &quot;Hello World&quot; cython_test.py1234567891011&quot;&quot;&quot;This is pure python file.Called from maya&quot;&quot;&quot;import helloworlddef hello(): helloworld.hello()","categories":[{"name":"code","slug":"code","permalink":"https://blog.cgdreamwork.com/categories/code/"}],"tags":[{"name":"Maya","slug":"Maya","permalink":"https://blog.cgdreamwork.com/tags/Maya/"},{"name":"Python","slug":"Python","permalink":"https://blog.cgdreamwork.com/tags/Python/"}]},{"title":"unity python api 使用","slug":"unityPython","date":"2021-03-23T15:04:25.000Z","updated":"2025-12-04T08:29:04.880Z","comments":true,"path":"post/71a4c25d.html","link":"","permalink":"https://blog.cgdreamwork.com/post/71a4c25d.html","excerpt":"","text":"Preview Anim1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283using UnityEngine.Playables;using UnityEngine;using EasyButtons;using UnityEngine.Animations;using Network.Proto;using UnityEditor;using Unity.Entities.UniversalDelegates;using System.Collections.Generic;[ExecuteInEditMode]public class SimpleAnimationPlayer : MonoBehaviour&#123; private PlayableGraph _graph; private AnimationClipPlayable _Playable; public IList&lt;AnimationClip&gt; clips; private Animator _animator; private AnimationClipPlayable _clipPlayable; private void Start() &#123; _animator = GetComponent&lt;Animator&gt;(); clips = _animator.runtimeAnimatorController.animationClips; Debug.Log(clips); &#125; public void StopPreview() &#123; if (_graph.IsValid()) &#123; _graph.Destroy(); &#125; &#125; public void PlayAnimation(int index) &#123; if (_animator == null || clips == null || index &lt; 0 || index &gt;= clips.Count) &#123; return; &#125; var animationClip = clips[index]; if (_clipPlayable.IsValid()) &#123; _clipPlayable.Destroy(); &#125; if (_graph.IsValid()) &#123; _graph.Destroy(); &#125; _clipPlayable = AnimationPlayableUtilities.PlayClip(_animator, animationClip, out _graph); &#125;&#125;[CustomEditor(typeof(SimpleAnimationPlayer))]public class SimpleAnimationPlayerEditor : UnityEditor.Editor&#123; Vector2 scrollPosition; public override void OnInspectorGUI() &#123; base.OnInspectorGUI(); var simpleAnimationPlayer = (SimpleAnimationPlayer)target; if (simpleAnimationPlayer.clips != null) &#123; scrollPosition = GUILayout.BeginScrollView(scrollPosition); for (var i = 0; i &lt; simpleAnimationPlayer.clips.Count; i++) &#123; var animationClip = simpleAnimationPlayer.clips[i]; if (animationClip != null &amp;&amp; GUILayout.Button(animationClip.name)) &#123; simpleAnimationPlayer.PlayAnimation(i); &#125; &#125; GUILayout.EndScrollView(); &#125; GUILayout.Space(5); if (GUILayout.Button(&quot;Stop Preview&quot;, GUILayout.Height(25))) &#123; simpleAnimationPlayer.StopPreview(); &#125; &#125;&#125;","categories":[{"name":"unity","slug":"unity","permalink":"https://blog.cgdreamwork.com/categories/unity/"}],"tags":[{"name":"unity","slug":"unity","permalink":"https://blog.cgdreamwork.com/tags/unity/"}]},{"title":"softSelectionweights","slug":"softSelectionweights","date":"2016-09-08T20:02:12.000Z","updated":"2025-12-04T08:29:04.880Z","comments":true,"path":"post/61ba0cba.html","link":"","permalink":"https://blog.cgdreamwork.com/post/61ba0cba.html","excerpt":"","text":"12345678910111213141516171819202122232425262728293031import maya.OpenMaya as OpenMayadef softSelection(): #Grab the soft selection selection = OpenMaya.MSelectionList() softSelection = OpenMaya.MRichSelection() OpenMaya.MGlobal.getRichSelection(softSelection) softSelection.getSelection(selection) dagPath = OpenMaya.MDagPath() component = OpenMaya.MObject() # Filter Defeats the purpose of the else statement iter = OpenMaya.MItSelectionList( selection,OpenMaya.MFn.kMeshVertComponent ) elements, weights = [], [] while not iter.isDone(): iter.getDagPath( dagPath, component ) dagPath.pop() #Grab the parent of the shape node node = dagPath.fullPathName() fnComp = OpenMaya.MFnSingleIndexedComponent(component) getWeight = lambda i: fnComp.weight(i).influence() if fnComp.hasWeights() else 1.0 for i in range(fnComp.elementCount()): elements.append(&#x27;%s.vtx[%i]&#x27; % (node, fnComp.element(i))) weights.append(getWeight(i)) iter.next() return elements, weightselements,weights = softSelection()","categories":[{"name":"python","slug":"python","permalink":"https://blog.cgdreamwork.com/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://blog.cgdreamwork.com/tags/python/"}]},{"title":"DeleteUvSets","slug":"DeleteUvSets","date":"2016-09-01T15:04:25.000Z","updated":"2025-12-04T08:29:04.879Z","comments":true,"path":"post/7aa2157f.html","link":"","permalink":"https://blog.cgdreamwork.com/post/7aa2157f.html","excerpt":"Usage: Delete UV Sets and rename last uvset","text":"Usage: Delete UV Sets and rename last uvset code:12345678910111213141516171819import maya.cmds as cmdsdef DeleteUvSets(newUVSet,sels): for mesh in sels: set = cmds.polyUVSet(mesh, query=True, allUVSets=1 ) for i in range(len(set)): if i&gt;0: cmds.polyUVSet(mesh, delete=True, uvSet=set[i]) try: cmds.polyUVSet(mesh,rename=True, newUVSet=newUVSet, uvSet= cmds.polyUVSet(mesh, currentLastUVSet=True )[0]) except: passsels = cmds.ls(sl=1)newUVSet=&#x27;map1&#x27;DeleteUvSets(newUVSet,sels)","categories":[{"name":"code","slug":"code","permalink":"https://blog.cgdreamwork.com/categories/code/"}],"tags":[{"name":"Maya","slug":"Maya","permalink":"https://blog.cgdreamwork.com/tags/Maya/"},{"name":"UV","slug":"UV","permalink":"https://blog.cgdreamwork.com/tags/UV/"}]},{"title":"Adding a QMenu to Maya","slug":"Adding-a-QMenu-to-Maya","date":"2016-08-25T22:19:08.000Z","updated":"2025-12-04T08:29:04.879Z","comments":true,"path":"post/4fee8c48.html","link":"","permalink":"https://blog.cgdreamwork.com/post/4fee8c48.html","excerpt":"Adding a QMenu to Maya https://groups.google.com/forum/#!forum/python_inside_maya","text":"Adding a QMenu to Maya https://groups.google.com/forum/#!forum/python_inside_maya code:12345678910111213141516171819202122232425import shibokenfrom PySide import QtGui, QtCoreimport maya.OpenMayaUI as apiUIdef getMayaWindow(): ptr = apiUI.MQtUtil.mainWindow() if ptr is not None: return shiboken.wrapInstance(long(ptr), QtGui.QMainWindow)def addMenuItem(mayaWindow=None, title=&#x27;&#x27;): mainMenu = QtGui.QMenu(title) menu = mayaWindow.menuBar().addMenu(mainMenu) return mainMenudef addMenuAction(menu=None, title=&#x27;&#x27;, action=&#x27;&#x27;): return menu.addAction(action)def addSeparator(menu): return menu.addSeparator()mayaWindow = getMayaWindow()mainMenu = addMenuItem(mayaWindow, &#x27;TESTING&#x27;)for a in range(20): addMenuAction(mainMenu, title=&#x27;&#x27;, action=&#x27;TESTING%s&#x27;%str(a)) if not a % 5: addSeparator(mainMenu)","categories":[{"name":"code","slug":"code","permalink":"https://blog.cgdreamwork.com/categories/code/"}],"tags":[{"name":"Qt","slug":"Qt","permalink":"https://blog.cgdreamwork.com/tags/Qt/"},{"name":"QMenu","slug":"QMenu","permalink":"https://blog.cgdreamwork.com/tags/QMenu/"},{"name":"Maya","slug":"Maya","permalink":"https://blog.cgdreamwork.com/tags/Maya/"},{"name":"PySide","slug":"PySide","permalink":"https://blog.cgdreamwork.com/tags/PySide/"}]},{"title":"github tips","slug":"github_tips","date":"2016-08-25T22:19:08.000Z","updated":"2025-12-04T08:29:04.879Z","comments":true,"path":"post/ee1ed4f7.html","link":"","permalink":"https://blog.cgdreamwork.com/post/ee1ed4f7.html","excerpt":"","text":"删除所有 tag 和 release:123456# 获取所有的 taggit tag -l | xargs -n 1 git push --delete origin# 删除本地的 taggit tag | xargs git tag -d","categories":[{"name":"code","slug":"code","permalink":"https://blog.cgdreamwork.com/categories/code/"}],"tags":[{"name":"github","slug":"github","permalink":"https://blog.cgdreamwork.com/tags/github/"}]},{"title":"meta human dna tool","slug":"meta_human_dna_tool","date":"2016-08-25T22:19:08.000Z","updated":"2025-12-04T08:29:04.880Z","comments":true,"path":"post/731fe6d6.html","link":"","permalink":"https://blog.cgdreamwork.com/post/731fe6d6.html","excerpt":"","text":"code:12","categories":[{"name":"code","slug":"code","permalink":"https://blog.cgdreamwork.com/categories/code/"}],"tags":[{"name":"maya","slug":"maya","permalink":"https://blog.cgdreamwork.com/tags/maya/"},{"name":"metahuman","slug":"metahuman","permalink":"https://blog.cgdreamwork.com/tags/metahuman/"}]},{"title":"sqlite3 基础操作","slug":"sqlite3 基础操作","date":"2016-08-25T22:19:08.000Z","updated":"2025-12-04T08:29:04.880Z","comments":true,"path":"post/cbced7f3.html","link":"","permalink":"https://blog.cgdreamwork.com/post/cbced7f3.html","excerpt":"","text":"code:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879import sqlite3DB_FILE_PATH = &quot;W:/shome/chengang/fps.db&quot;conn = sqlite3.connect(DB_FILE_PATH)cursor = conn.cursor()# 添加 tablecursor.execute(&#x27;create table COMPANY (proj,char,fps)&#x27;)cursor.rowcountcursor.close()conn.commit()conn.close()# 添加conn = sqlite3.connect(DB_FILE_PATH)cursor = conn.cursor()users = (&#x27;wps&#x27;,&#x27;test1&#x27;,&#x27;20&#x27;)ins=&quot;INSERT INTO COMPANY(proj,char,fps) VALUES (?,?,?)&quot;cursor.execute(ins,users) cursor.close()conn.commit()conn.close()# 查询conn = sqlite3.connect(DB_FILE_PATH)cursor = conn.cursor()cursor.execute(&#x27;select * from COMPANY where proj=? and char=?&#x27;, (&#x27;wps&#x27;,&quot;test1&quot;))values = cursor.fetchall()print valuescursor.close()conn.close()# 查询conn = sqlite3.connect(DB_FILE_PATH)cursor = conn.cursor()cursor.execute(&#x27;select * from COMPANY where proj=? &#x27;, (&#x27;wps&#x27;,))values = cursor.fetchall()print valuescursor.close()conn.close()# 查询 countconn = sqlite3.connect(DB_FILE_PATH)cursor = conn.cursor()cursor.execute(&quot;select count(char) from COMPANY&quot;)values = cursor.fetchall()print valuescursor.close()conn.close()# 删除conn = sqlite3.connect(DB_FILE_PATH)cursor = conn.cursor()cursor.execute(&#x27;delete from COMPANY where proj=? and char=?&#x27;,(&#x27;wps&#x27;,&quot;test1&quot;)) cursor.close()conn.commit()conn.close()# 查询conn = sqlite3.connect(DB_FILE_PATH)cursor = conn.cursor()cursor.execute(&#x27;SELECT * FROM COMPANY&#x27;)values = cursor.fetchall()print valuescursor.close()conn.close()","categories":[{"name":"code","slug":"code","permalink":"https://blog.cgdreamwork.com/categories/code/"}],"tags":[{"name":"Maya","slug":"Maya","permalink":"https://blog.cgdreamwork.com/tags/Maya/"}]},{"title":"用Samba服务替代Win10原生的文件共享","slug":"win11wslsamba","date":"2016-08-25T22:19:08.000Z","updated":"2025-12-04T08:29:04.880Z","comments":true,"path":"post/7e7d60bc.html","link":"","permalink":"https://blog.cgdreamwork.com/post/7e7d60bc.html","excerpt":"","text":"启用虚拟 虚拟机平台功能12dism.exe &#x2F;online &#x2F;enable-feature &#x2F;featurename:Microsoft-Windows-Subsystem-Linux &#x2F;all &#x2F;norestartdism.exe &#x2F;online &#x2F;enable-feature &#x2F;featurename:VirtualMachinePlatform &#x2F;all &#x2F;norestart wsl 命令123456789wsl -l -v #检查正在运行的Linux发行版wsl --setdefault Ubuntu-18.04 #将 Ubuntu-18.04 设置为wsl默认使用的Linux发行版wsl --update # 以防万一更新wslwsl --set-version Ubuntu-22.04 2 #设置更新到 Ubuntu-18.04为WSL2wsl #进入到Ubuntu-18.04 命令行wsl.exe --shutdownwsl.exenet stop LxssManagernet start LxssManager 更新Linux内核1wsl --update 设置WSL2为默认版本1wsl --set-default-version 2 迁移位置12# wsl --export &lt;系统名&gt; &lt;导出文件位置&gt;wsl --export Ubuntu-20.04 D:\\10_WSL2\\Ubuntu-20.04.tar 导入ubuntu12# wsl --import &lt;系统名&gt; &lt;安装位置&gt; &lt;导入文件位置&gt; WSL版本号wsl --import Ubuntu_new D:\\10_WSL2 D:\\10_WSL2\\Ubuntu-20.04.tar --version 2 删除迁移前的系统12wsl -l -vwsl --unregister Ubuntu-20.04 wsl win路径1\\\\wsl$ 关闭 Win10 中的相关端口Linux 中的 Samba 服务主要用到 139 和 445 这两个端口，因此首先要取消在 Win10 中的这两个端口 139 端口：网络和 Internet - 更改适配器选项 - 右键当前网络对象属性 - 选中 TCP/IPv4 属性 - 高级 - WINS - 禁用 TCP/IP 上的 NetBIOS 445 端口：服务 - 找到 Server 服务 - 启动类型禁用 - 重启 win 防火墙1wf.msc win 查看端口占用1netstat -a|findstr LISTENING wsl Ubuntu 替换阿里源12345678910111213141516171819202122cp &#x2F;etc&#x2F;apt&#x2F;sources.list &#x2F;etc&#x2F;apt&#x2F;sources.list.baksudo vi &#x2F;etc&#x2F;apt&#x2F;sources.listdeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-security main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-security main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-proposed main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-proposed main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse# echo &quot;nameserver 8.8.8.8&quot; | sudo tee &#x2F;etc&#x2F;resolv.conf &gt; &#x2F;dev&#x2F;nullsudo apt-get update &amp;&amp; sudo apt-get upgrade Ubuntu 防火墙12ufw disableufw enable 配置wslconfig123456789101112cd ~New-Item .wslconfig.\\.wslconfig写入[wsl2]networkingMode&#x3D;bridgedvmSwitch&#x3D;WSL_externaldhcp&#x3D;falseipv6&#x3D;truememory&#x3D;4GB processors&#x3D;2 配置network123456789101112sudo touch &#x2F;lib&#x2F;systemd&#x2F;network&#x2F;wsl_external.network # 创建网络配置文件sudo vim &#x2F;lib&#x2F;systemd&#x2F;network&#x2F;wsl_external.network # 编辑该文件并添加以下内容[Match]Name&#x3D;eth0[Network]Description&#x3D;bridgeDHCP&#x3D;falseAddress&#x3D;192.168.1.110&#x2F;24Gateway&#x3D;192.168.1.1 #按ESC+:wq 保存并退出 配置wsl.conf123456789101112sudo touch &#x2F;etc&#x2F;wsl.conf #创建发行版wsl配置文件sudo vim &#x2F;etc&#x2F;wsl.conf # 编辑该文件并添加以下内容[boot] systemd&#x3D;true[user]default&#x3D;root[network]generateResolvConf&#x3D;falsehostname&#x3D;WSL2#按ESC+:wq 保存并退出 配置resolv.conf12345678910sudo rm &#x2F;etc&#x2F;resolv.confsudo touch &#x2F;etc&#x2F;resolv.conf #创建并DNS服务器IP地址配置文件sudo vim &#x2F;etc&#x2F;resolv.conf # 编辑该文件并添加以下内容nameserver 114.114.114.114nameserver 8.8.8.8nameserver 8.8.4.4nameserver 223.5.5.5#按ESC+:wq 保存并退出 执行以下命令重起网络服务123456sudo apt-get update #更新包管理库，注意不要换阿里源&#x2F;清华源什么的sudo apt-get install systemd # 安装systemd管理工具systemctl restart systemd-networkdsystemctl enable systemd-networkdsystemctl restart systemd-resolved.servicesystemctl enable systemd-resolved.service WSL samba 配置安装1sudo apt-get install samba 重启 samba12sudo systemctl restart smbd.servicesudo service smbd restart reload samba1sudo systemctl reload smbd samba testparm1testparm -s &#x2F;etc&#x2F;samba&#x2F;smb.conf 配置1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950sudo vi &#x2F;etc&#x2F;samba&#x2F;smb.conf[global] server string &#x3D; Samba Server Version %v workgroup &#x3D; WORKGROUP security &#x3D; user passdb backend &#x3D; smbpasswd guest ok &#x3D; no max log size &#x3D; 1000 syslog &#x3D; 0 log level &#x3D; 3 vfs:10 log file &#x3D; &#x2F;var&#x2F;log&#x2F;samba&#x2F;log.%m max connections &#x3D; 0 guest account &#x3D; nobody create mask &#x3D; 0775 force create mode &#x3D; 0775 directory mask &#x3D; 0775 force directory mode &#x3D; 0775 map to guest &#x3D; bad user smb passwd file &#x3D; &#x2F;etc&#x2F;samba&#x2F;smbpasswd # username map &#x3D; &#x2F;etc&#x2F;samba&#x2F;smbusers vfs objects &#x3D; full_audit;recycle full_audit:success &#x3D; mkdir rmdir read pread write pwrite rename unlink full_audit:prefix &#x3D; %u|%I|%m|%S full_audit:failure &#x3D; none # full_audit:failure &#x3D; connect full_audit:facility &#x3D; local5 full_audit:priority &#x3D; notice recycle:exclude_dir&#x3D; &#x2F;mnt&#x2F;d&#x2F;recycle recycle:repository &#x3D; &#x2F;mnt&#x2F;d&#x2F;recycle recycle:keeptree &#x3D; yes recycle:versions &#x3D; yes recycle:touch &#x3D; yes recycle:directory_mode &#x3D; 0777 recycle:subdir_mode &#x3D; 0700 recycle:exclude &#x3D; *.tmp, *.bak[share] path &#x3D; &#x2F;mnt&#x2F;c&#x2F;share comment &#x3D; &quot;share&quot; public &#x3D; no available &#x3D; yes browseable &#x3D; yes read only &#x3D; no writable &#x3D; no valid users &#x3D; caochen cg read list &#x3D; caochen cg write list &#x3D; cg 配置 smbpasswd12345678910touch &#x2F;etc&#x2F;samba&#x2F;smbpasswdsudo useradd -s &#x2F;sbin&#x2F;nologin testsudo smbpasswd -a testsmbpasswd -a 增加用户（要增加的用户必须以是系统用户）smbpasswd -d 冻结用户，就是这个用户不能在登录了smbpasswd -e 恢复用户，解冻用户，让冻结的用户可以在使用smbpasswd -n 把用户的密码设置成空.要在global中写入 null passwords -truesmbpasswd -x 删除用户 full_audit 配置1234567vi &#x2F;etc&#x2F;rsyslog.d&#x2F;50-default.conf添加*.*;local5,auth,authpriv.none -&#x2F;var&#x2F;log&#x2F;sysloglocal5.* &#x2F;var&#x2F;log&#x2F;samba&#x2F;full_audit.logsudo systemctl restart smbdsudo systemctl restart rsyslog 端口转发123456789netsh interface portproxy show all# netsh interface portproxy add v4tov4 listenport&#x3D;[win10端口] listenaddress&#x3D;0.0.0.0 connectport&#x3D;[虚拟机的端口] connectaddress&#x3D;[虚拟机的ip]netsh interface portproxy add v4tov4 listenport&#x3D;139 listenaddress&#x3D;0.0.0.0 connectport&#x3D;139 connectaddress&#x3D;[虚拟机的ip]netsh interface portproxy add v4tov4 listenport&#x3D;445 listenaddress&#x3D;0.0.0.0 connectport&#x3D;445 connectaddress&#x3D;[虚拟机的ip]netsh interface portproxy delete v4tov4 listenport&#x3D;445 listenaddress&#x3D;0.0.0.0netsh interface portproxy delete v4tov4 listenport&#x3D;139 listenaddress&#x3D;0.0.0.0 wsl Ubuntu 安装宝塔1wget -O install.sh http:&#x2F;&#x2F;download.bt.cn&#x2F;install&#x2F;install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh","categories":[{"name":"code","slug":"code","permalink":"https://blog.cgdreamwork.com/categories/code/"}],"tags":[{"name":"Samba","slug":"Samba","permalink":"https://blog.cgdreamwork.com/tags/Samba/"}]}],"categories":[{"name":"code","slug":"code","permalink":"https://blog.cgdreamwork.com/categories/code/"},{"name":"unity","slug":"unity","permalink":"https://blog.cgdreamwork.com/categories/unity/"},{"name":"python","slug":"python","permalink":"https://blog.cgdreamwork.com/categories/python/"}],"tags":[{"name":"Maya","slug":"Maya","permalink":"https://blog.cgdreamwork.com/tags/Maya/"},{"name":"Python","slug":"Python","permalink":"https://blog.cgdreamwork.com/tags/Python/"},{"name":"unity","slug":"unity","permalink":"https://blog.cgdreamwork.com/tags/unity/"},{"name":"python","slug":"python","permalink":"https://blog.cgdreamwork.com/tags/python/"},{"name":"UV","slug":"UV","permalink":"https://blog.cgdreamwork.com/tags/UV/"},{"name":"Qt","slug":"Qt","permalink":"https://blog.cgdreamwork.com/tags/Qt/"},{"name":"QMenu","slug":"QMenu","permalink":"https://blog.cgdreamwork.com/tags/QMenu/"},{"name":"PySide","slug":"PySide","permalink":"https://blog.cgdreamwork.com/tags/PySide/"},{"name":"github","slug":"github","permalink":"https://blog.cgdreamwork.com/tags/github/"},{"name":"maya","slug":"maya","permalink":"https://blog.cgdreamwork.com/tags/maya/"},{"name":"metahuman","slug":"metahuman","permalink":"https://blog.cgdreamwork.com/tags/metahuman/"},{"name":"Samba","slug":"Samba","permalink":"https://blog.cgdreamwork.com/tags/Samba/"}]}